<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kittipos Sirivongrungson">
<meta name="dcterms.date" content="2022-08-05">

<title>ACR TI-RADS Calculator</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="app-tirads-calc_files/libs/clipboard/clipboard.min.js"></script>
<script src="app-tirads-calc_files/libs/quarto-html/quarto.js"></script>
<script src="app-tirads-calc_files/libs/quarto-html/popper.min.js"></script>
<script src="app-tirads-calc_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="app-tirads-calc_files/libs/quarto-html/anchor.min.js"></script>
<link href="app-tirads-calc_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="app-tirads-calc_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="app-tirads-calc_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="app-tirads-calc_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="app-tirads-calc_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


<link rel="stylesheet" href="css/style.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#charts" id="toc-charts" class="nav-link active" data-scroll-target="#charts">Charts</a></li>
  <li><a href="#categories" id="toc-categories" class="nav-link" data-scroll-target="#categories">Categories</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">Results</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">ACR TI-RADS Calculator</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source" data-quarto-source-url="https://github.com/Lightbridge-KS/tirads-calc"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">A Calculator for Thyroid Imaging Reporting &amp; Data System</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kittipos Sirivongrungson </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 5, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<div class="cell">

</div>
<div class="cell">

</div>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
About
</div>
</div>
<div class="callout-body-container callout-body">
<p>This calculator was implemented from <a href="https://www.acr.org/Clinical-Resources/Reporting-and-Data-Systems/TI-RADS">ACR TI-RADS‚Ñ¢</a> for thyroid ultrasound.</p>
</div>
</div>
<section id="charts" class="level2">
<h2 class="anchored" data-anchor-id="charts">Charts</h2>
<div id="fig-tirads-chart" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="images/tirads-chart.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Figure 1: ACR TI-RADS Chart to determine TI-RADS Level and Suggestions <span class="citation" data-cites="ACR-TIRADS-WhitePaper">[<a href="#ref-ACR-TIRADS-WhitePaper" role="doc-biblioref">1</a>]</span></figcaption><p></p>
</figure>
</div>
</section>
<section id="categories" class="level2">
<h2 class="anchored" data-anchor-id="categories">Categories</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">‚úÖ</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">üèû</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<div id="composition" style="width:400px;" class="form-group shiny-input-radiogroup shiny-input-container" role="radiogroup" aria-labelledby="composition-label">
<label class="control-label" id="composition-label" for="composition">
<b>Composition</b>
</label>
<div class="shiny-options-group">
<div class="radio">
<label>
<input type="radio" name="composition" value="cystic">
<span>Cystic or almost completely cystic (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="composition" value="spongiform">
<span>Spongiform (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="composition" value="mixed">
<span>Mixed cystic and solid (1)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="composition" value="solid">
<span>Solid or almost completely solid (2)</span>
</label>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div id="fig-composition" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./images/composition.png" class="img-fluid figure-img" style="width:80.0%"></p>
<p></p><figcaption class="figure-caption">Figure 2: <strong>Composition</strong> (adapted from <span class="citation" data-cites="RadAssist">[<a href="#ref-RadAssist" role="doc-biblioref">2</a>]</span>)</figcaption><p></p>
</figure>
</div>
<ul>
<li><strong>Spongiform:</strong> aggregation of multiple microcystic components ‚â• 50% of the volume of the nodule <span class="citation" data-cites="ACR-TIRADS-Lexicon">[<a href="#ref-ACR-TIRADS-Lexicon" role="doc-biblioref">3</a>]</span>.</li>
</ul>
</div>
</div>
</div>
<hr>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">‚úÖ</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">üèû</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<div id="echogenicity" style="width:400px;" class="form-group shiny-input-radiogroup shiny-input-container" role="radiogroup" aria-labelledby="echogenicity-label">
<label class="control-label" id="echogenicity-label" for="echogenicity">
<b>Echogenicity</b>
</label>
<div class="shiny-options-group">
<div class="radio">
<label>
<input type="radio" name="echogenicity" value="an">
<span>Anechoic (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="echogenicity" value="hyper">
<span>Hyperechoic or Isoechoic (1)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="echogenicity" value="hypo">
<span>Hypoechoic (2)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="echogenicity" value="very-hypo">
<span>Very hypoechoic (3)</span>
</label>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div id="fig-echogenicity" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="./images/echogenicity.png" class="img-fluid figure-img" style="width:100.0%"></p>
<p></p><figcaption class="figure-caption">Figure 3: <strong>Echogenicity</strong> (adapted from <span class="citation" data-cites="RadAssist RadKey-ThyroidCyst">[<a href="#ref-RadAssist" role="doc-biblioref">2</a>,<a href="#ref-RadKey-ThyroidCyst" role="doc-biblioref">4</a>]</span>)</figcaption><p></p>
</figure>
</div>
<ul>
<li><p><strong>Hyper/iso/hypoechoic:</strong> relative to surrounding <em>thyroid tissue</em> <span class="citation" data-cites="ACR-TIRADS-Lexicon">[<a href="#ref-ACR-TIRADS-Lexicon" role="doc-biblioref">3</a>]</span>.</p></li>
<li><p><strong>Very hypoechoic:</strong> hypoechoic relative to adjacent <em>neck musculature</em> <span class="citation" data-cites="ACR-TIRADS-Lexicon">[<a href="#ref-ACR-TIRADS-Lexicon" role="doc-biblioref">3</a>]</span>.</p></li>
</ul>
</div>
</div>
</div>
<hr>
<div class="cell">
<div class="cell-output-display">
<div id="shape" style="width:400px;" class="form-group shiny-input-radiogroup shiny-input-container" role="radiogroup" aria-labelledby="shape-label">
<label class="control-label" id="shape-label" for="shape">
<b>Shape</b>
</label>
<div class="shiny-options-group">
<div class="radio">
<label>
<input type="radio" name="shape" value="wider">
<span>Wider-than-tall (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="shape" value="taller">
<span>Taller-than-wide (3)</span>
</label>
</div>
</div>
</div>
</div>
</div>
<hr>
<div class="cell">
<div class="cell-output-display">
<div id="margin" style="width:400px;" class="form-group shiny-input-radiogroup shiny-input-container" role="radiogroup" aria-labelledby="margin-label">
<label class="control-label" id="margin-label" for="margin">
<b>Margin</b>
</label>
<div class="shiny-options-group">
<div class="radio">
<label>
<input type="radio" name="margin" value="smooth">
<span>Smooth (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="margin" value="ill-defined">
<span>Ill-defined (0)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="margin" value="lobulated">
<span>Lobulated or Irregular (2)</span>
</label>
</div>
<div class="radio">
<label>
<input type="radio" name="margin" value="extra">
<span>Extrathyroidal extension (3)</span>
</label>
</div>
</div>
</div>
</div>
</div>
<hr>
<div class="cell">
<div class="cell-output-display">
<div id="echogenic_foci" style="width:400px;" class="form-group shiny-input-checkboxgroup shiny-input-container" role="group" aria-labelledby="echogenic_foci-label">
<label class="control-label" id="echogenic_foci-label" for="echogenic_foci">
<b>Echogenic foci</b>
</label>
<div class="shiny-options-group">
<div class="checkbox">
<label>
<input type="checkbox" name="echogenic_foci" value="none">
<span>None or Large comet-tail artifacts (0)</span>
</label>
</div>
<div class="checkbox">
<label>
<input type="checkbox" name="echogenic_foci" value="macro-calc">
<span>Macrocalcification (1)</span>
</label>
</div>
<div class="checkbox">
<label>
<input type="checkbox" name="echogenic_foci" value="rim-calc">
<span>Rim calcification (2)</span>
</label>
</div>
<div class="checkbox">
<label>
<input type="checkbox" name="echogenic_foci" value="punctate">
<span>Punctate echogenic foci (3)</span>
</label>
</div>
</div>
</div>
</div>
</div>
<hr>
<div class="cell">
<div class="cell-output-display">
<div class="form-group shiny-input-container">
<label class="control-label" id="size_cm-label" for="size_cm">
<b>Size</b>
(cm)
</label>
<input id="size_cm" type="number" class="form-control" value="NA" min="0">
</div>
</div>
</div>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">Results</h2>
<div class="results-main">
<div class="cell">
<div class="cell-output-display">
<p></p><div id="tirads_lv" class="shiny-html-output"></div><p></p>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p></p><div id="points_df" class="shiny-html-output"></div><p></p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<p></p><div id="suggest" class="shiny-html-output"></div><p></p>
</div>
<div class="cell-output-display">
<p></p><div id="suggest_FNA" class="shiny-html-output"></div><p></p>
</div>
<div class="cell-output-display">
<p></p><div id="suggest_follow" class="shiny-html-output"></div><p></p>
</div>
</div>
<div class="cell">

</div>
<div class="cell" data-context="server">

</div>
<div class="cell">

</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
# pak::pkg_install("Lightbridge-KS/radcalc")
library(shiny)
library(purrr)
width_choices <- "400px"
</script>
 
<script type="application/shiny-prerendered" data-context="server">
# output$raw <- renderPrint(list(
#   composition = input$composition,
#   echogenicity = input$echogenicity,
#   shape = input$shape,
#   margin = input$margin,
#   echogenic_foci = input$echogenic_foci,
#   size_cm = input$size_cm
# ))


  tirads_report <- reactive({

    req(input$composition, input$echogenicity,
        input$shape, input$margin, input$echogenic_foci)

    radcalc::TIRADS_calc(
      composition = input$composition,
      echogenicity = input$echogenicity,
      shape = input$shape,
      margin = input$margin,
      echogenic_foci = input$echogenic_foci,
      size_cm = input$size_cm
    )
  })


  ## TIRADS Level
  output$tirads_lv <- renderUI({

    tags$code(paste0(names(tirads_report()$level), ": ", tirads_report()$level))

  })

  ## GT Table: Total Points
  output$points_df <- gt::render_gt(
    {
      points <- tirads_report()$points
      points_w_sum <- c(points, total = sum(points))

      points_w_sum |>
        setNames(c(
          "Composition", "Echogenicity",
          "Shape", "Margin", "Echogenic foci", "Total"
        )) |>
        tibble::enframe("Categories", "Points") |>
        gt::gt() |>
        gt::tab_style(
          style = list(
            gt::cell_text(weight = "bold")
          ),
          locations = gt::cells_body(
            columns = everything(),
            rows = 6
          )
        ) |>
        gt::tab_style(
          style = list(
            gt::cell_text(weight = "bold")
          ),
          locations = gt::cells_column_labels()
        )
    },
    align = "left"
  )

  ## Suggestions
  output$suggest <- renderUI({
    should_FNA <- tirads_report()$should_FNA
    should_follow <- tirads_report()$should_follow

    # Eval if neither is `NA`
    req( !any(is.na(c(should_FNA, should_follow)) ))


    li_fna <- if(should_FNA) {
      tags$li("FNA is advised.")
    } else {
      tags$li("FNA is NOT advised.")
    }

    li_follow <- if(should_follow) {
      tags$li("Follow-up is advised.")
    } else {
      NULL
    }

    tagList(
      tags$h3("Suggestion"),
      tags$ul(
        li_follow,
        li_fna
      )
    )
  })
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56]}},"value":[{"type":"character","attributes":{},"value":["assertthat","base","cli","colorspace","compiler","crayon","datasets","DBI","digest","dplyr","ellipsis","evaluate","fansi","fastmap","generics","ggplot2","glue","graphics","grDevices","grid","gt","gtable","htmltools","htmlwidgets","httpuv","jsonlite","knitr","later","lifecycle","magrittr","methods","mime","munsell","pillar","pkgconfig","promises","purrr","R6","Rcpp","renv","rlang","rmarkdown","scales","shiny","stats","stringi","stringr","tibble","tidyselect","tools","utf8","utils","vctrs","xfun","xtable","yaml"]},{"type":"character","attributes":{},"value":["0.2.1","4.2.0","3.3.0","2.0-3","4.2.0","1.5.1","4.2.0","1.1.2","0.6.29","1.0.9","0.3.2","0.15","1.0.3","1.1.0","0.1.2","3.3.6","1.6.2","4.2.0","4.2.0","4.2.0","0.6.0","0.3.0","0.5.2","1.5.4","1.6.5","1.8.0","1.39","1.3.0","1.0.1","2.0.3","4.2.0","0.12","0.5.0","1.7.0","2.0.3","1.2.0.1","0.3.4","2.5.1","1.0.8.3","0.15.5","1.0.2","2.14","1.2.0","1.7.1","4.2.0","1.7.6","1.4.0","3.1.7","1.1.2","4.2.0","1.2.2","4.2.0","0.4.1","0.31","1.8-4","2.3.5"]}]}]}
</script>
<!--/html_preserve-->

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body" role="doc-bibliography">
<div id="ref-ACR-TIRADS-WhitePaper" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">F.N. Tessler, W.D. Middleton, E.G. Grant, J.K. Hoang, L.L. Berland, S.A. Teefey, J.J. Cronan, M.D. Beland, T.S. Desser, M.C. Frates, L.W. Hammers, U.M. Hamper, J.E. Langer, C.C. Reading, L.M. Scoutt, A.T. Stavros, ACR thyroid imaging, reporting and data system (TI-RADS): White paper of the ACR TI-RADS committee, Journal of the American College of Radiology: JACR. 14 (2017) 587‚Äì595. https://doi.org/<a href="https://doi.org/10.1016/j.jacr.2017.01.046">10.1016/j.jacr.2017.01.046</a>.</div>
</div>
<div id="ref-RadAssist" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">A. van der L. Habib Ahmad, The radiology assistant: TI-RADS - thyroid imaging reporting and data system, (n.d.). <a href="https://radiologyassistant.nl/head-neck/ti-rads/ti-rads">https://radiologyassistant.nl/head-neck/ti-rads/ti-rads</a>.</div>
</div>
<div id="ref-ACR-TIRADS-Lexicon" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">E.G. Grant, F.N. Tessler, J.K. Hoang, J.E. Langer, M.D. Beland, L.L. Berland, J.J. Cronan, T.S. Desser, M.C. Frates, U.M. Hamper, W.D. Middleton, C.C. Reading, L.M. Scoutt, A.T. Stavros, S.A. Teefey, Thyroid ultrasound reporting lexicon: White paper of the ACR thyroid imaging, reporting and data system (TIRADS) committee, Journal of the American College of Radiology: JACR. 12 (2015) 1272‚Äì1279. https://doi.org/<a href="https://doi.org/10.1016/j.jacr.2015.07.011">10.1016/j.jacr.2015.07.011</a>.</div>
</div>
<div id="ref-RadKey-ThyroidCyst" class="csl-entry" role="doc-biblioentry">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">Z. Fry≈°√°k, Radiology key: Thyroid cysts, (2017). <a href="https://radiologykey.com/thyroid-cysts">https://radiologykey.com/thyroid-cysts</a>.</div>
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>